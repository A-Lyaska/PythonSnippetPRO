Задания контрольной работы
==========================

.. role:: bash(code)
   :language: bash


**Сниппет** (англ. **snippet** — отрывок, фрагмент) — фрагмент исходного текста или кода программы, применяемый
в поисковых системах, текстовых редакторах и средах разработки. Вам уже знаком этот проект.

Сейчас же перед вами улучшенная версия сего сервиса: **PythonBin v2.0**

Отличается она тем, что помимо хранения сниппетов, также стало возможно форматировать их при помощи нескольких утилит.

* **autopep8** - утилита, форматирующая код в соответствии с рекомендациями PEP8
* **docformatter** - утилита, приводящая doc-строки в соответствие с рекомендациям PEP257
* **unify** - утилита, приводящая кавычки всех строк в проекте к единому формату
* **autoflake** - утилита, чистящая код от неиспользуемых импортов и переменных


****************************
Задание 0 - подготовительное
****************************

* Скачать архив с подготовительными материалами,
* разархивировать его,
* инициализировать пустой git-репозиторий и сделать первый коммит, содержащий все файлы проекта
* открыть проект в PyCharm (любой другой IDE),
* настроить виртуальное окружение.

  **Примечание** если в процессе настройки вы столкнётесь с ошибкой

  .. code-block:: bash

    error: invalid command 'bdist_wheel'

  то решением проблемы будет являться команда:

  .. code-block:: bash

    pip3 install wheel

* Запустить проект,
* ознакомиться с наполнением сайта (данные для входа на сайт написаны рядом с формой авторизации).
* ознакомиться с заданиями - они размещены в Eduapp и в документации проекта.


***********************
Задание 1 - сохраняющее
***********************
Опубликуйте данный git-репозиторий на сайте https://gitlab.informatics.ru (создайте новый проект).

* Проект должен называться **prom_final_kr**.
* Уровень видимости проекта: **protected**.


**********************
Задание 2 - просто код
**********************
* Модифицируйте код проекта таким образом, чтобы на странице "Мои сниппеты" стало отбражаться количество сниппетов.
  Скриншот оригинальной страницы и результата:

  .. image:: _static/my_snippets_count.png

* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


****************************************************
Задание 3 - классы, наследование - всё как вы любите
****************************************************
**unify** - утилита, приводящая кавычки всех строк в проекте к единому формату...
Подождите, а вот эту утилиту-то мы и забыли реализовать.

* Модифицируйте код проекта таким образом, чтобы:

  * на странице "Просмотр кода" в панели кнопок утилит появилась новая кнопка "unify".

    .. image:: _static/unify_button.png


  * в модуле :class:`main.formatter` добавился новый класс, отвечающий за работу этой утилиты
  * добавилась новая страница с результатами работы этой утилиты.

    Страница должна находиться по адресу **/snippets/id/format/unify**

    Действие этой страницы - аналогично страницам **/snippets/id/format/docformatter** и **/snippets/id/format/autoflake**

    .. image:: _static/unify_page.png

    **Примечание:** для модуля :py:mod:`main.formatter` в проекте присутствует документация.

  **Примечание:** для получения правильного решения задачи потребуется написать
  не больше 10 строчек кода в различных файлах.


* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


****************************************
Задание 4 - PEP8, как много в этом слове
****************************************
* Модифицируйте код проекта таким образом, чтобы команда

  .. code-block:: bash

    pycodestyle main/views.py main/formatter.py main/forms.py

  не выдавала никаких предупреждений

* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


************************************
Задание 5 - Pylint, куда же без него
************************************
* Модифицируйте код проекта таким образом, чтобы команда

  .. code-block:: bash

    pylint \
      -j 0 \
      --load-plugins pylint_django \
      --disable=W0201 \
      main/views.py main/models.py main/formatter.py

  оценивала ваш код не менее, чем в **9.50** баллов

* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


*************************
Задание 6 - Т-т-т - тесты
*************************
На данный момент в проекте присутствуют 5 тестов.

* Добавьте ещё 3, чтобы их количество было не менее 8.
* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


********************************************
Задание 7 - Всех покроем, начиная с крайнего
********************************************
* Модифицируйте код проекта таким образом, чтобы команда

  .. code-block:: bash

    coverage run manage.py test && \
    coverage report -m  main/views.py main/models.py main/formatter.py


  оценивала покрытие кода не менее, чем в **80** процентов

* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


*****************************************
Задание 8 - Продолжительно-интеграционное
*****************************************
* Добавьте в проект файл .gitlab-ci.yml.
* Опишите в нём настройку процесса CI. В ходе выполнения процесса должны запуститься тесты и вычислиться покрытие кода.
* Сделайте коммит с описанием изменений и опубликуйте его в Gitlab.

  **Примечание:** описание коммита должно отображать реальные изменения.
  В противном случае от результата будут отниматься 20 баллов.


*******************
Задание 9 - Вишенка
*******************
* Перейдите на странице проекта на сайте https://gitlab.informatics.ru
* Добавьте на страницу проекта два бейджа

  * статус текущего build'а
  * coverage


*************************
Задание последнее - отчёт
*************************
* Отправьте ссылку на репозиторий в соответствющую задачу в Eduapp.

